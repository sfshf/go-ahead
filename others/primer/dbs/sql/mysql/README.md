
# 目录

- [数据库基础知识]()
  - [数据模型]()
    - [概念模型]()
    - [逻辑模型]()
    - [物理模型]()
- [关系数据库]()
  - [关系数据库基本性质]()
- [数据库设计基础]()
- [MySQL概述]()
- [MySQL编程语言 -- 结构化查询语言（SQL）]()
  - [MySQL语言组成]()
- [数据定义]()
- [数据查询]()
- [数据更新]()
- [索引]()
- [视图]()
- [触发器]()
- [事件]()
- [存储过程与存储函数]()
- [访问控制与安全管理]()
- [备份与恢复]()
- [开发实例]()


# 内容


## 数据库基础知识

1、`数据`：描述事物的符号记录称为数据（Data）。
2、`数据库`：长期储存在计算机内的、有组织的、可共享的数据集合。
3、`数据库管理系统`：是位于操作系统与用户之间的一层数据管理软件，是`数据库系统`的核心。`DBMS`按照一定的`数据模型`科学地组织和存储数据，能够高效地获取数据，提供安全性和完整性等统一控制机制，有效地管理、维护数据，是数据库系统的核心。`DBMS`的主要功能包括数据定义、数据操作、数据库建立和维护、数据库运行管理等。
4、`数据库系统`：是指引入数据库技术的计算机系统。一个完整的数据库系统不仅包含数据库，还包含支持数据库的硬件、数据管理系统及相关软件、数据库管理员和用户。


### 数据模型

数据库中的数据是有一定结构的，这种结构用`数据模型（Data Model）`表示。根据不同的应用目的，`数据模型`可以分为`概念模型`、`逻辑模型`和`物理模型`。


#### 概念模型

`概念模型（Conceptual Model）`用来描述现实世界的事物，与具体的计算机系统无关。在设计数据库时，用`概念模型`来抽象、表示现实世界的各种事物及其联系。最典型的`概念模型`是`实体联系（Entity-Relationship，E-R）模型`。`实体联系模型`用`实体-联系图`表示，简称`E-R图`。

**E-R模型：**

`实体（Entity）` -- 客观存在并可相互区别的事物；实体可以是实际的事物，也可以是抽象的概念。
`属性（Attribute）` -- 实体的某种特性称为实体的属性。一个实体可以由多个属性描述。
`联系（Relationship）` -- 在现实世界中，事物内部的特性及各事物之间是有关系的。这些关系称为`实体内部的联系`及`实体之间的联系`。`实体内部的联系`通常是指实体个属性之间的联系；`实体之间的联系`是指不同实体之间的联系。

`实体集`之间的联系有`一对一`、`一对多`、`多对多`三种类型。

**E-R图：**

`实体` -- 用`矩形`表示，矩形框内写明实体的名称。
`属性` -- 用`椭圆形`表示，并用无向边将其与相应的实体连接起来。
`联系` -- 用`菱形`表示，菱形框内写明联系的名称，并用无向边分别与有关实体连接起来，同时在无向边旁标上联系的类型（`1:1`、`1:N`、`M:N`）。如果一个联系具有属性，则这些属性也要用无向边与该联系连接起来。


#### 逻辑模型

`逻辑模型（Logical Model）`是`具体的DBMS`所支持的数据模型。`任何DBMS`都基于某种逻辑数据模型。主要的逻辑数据模型有`层次模型（Hierarchical Model）`、`网状模型（Network Model）`、`关系模型（Relational Model）`、`面向对象模型（Object-Oriented Model）`等。

**关系模型：**

`关系模型`使用`二维表`结构来表示实体及实体间联系的模型，并以`二维表`的形式组织数据库中的数据。支持`关系模型`的数据库管理系统统称为`关系数据库管理系统`，例如`MySQL`。


#### 物理模型

`物理模型`用于描述数据在存储介质上的组织结构。每一种`逻辑数据模型`在实现时都有`与其相对应的物理数据模型`。`物理数据模型`不但由DBMS的设计决定，而且与操作系统、计算机硬件密切相关。`物理数据结构`一般都向用户屏蔽，用户不必了解其细节。


## 关系数据库

`关系数据库`，即使用`关系模型`作为`逻辑数据模型`的数据库。

`关系`的数据结构就是`二维表`。无论是`实体`还是`实体之间的联系`，都用`关系`表示。常说的`关系`就是指`表`。

**表：**

`表（Table）`也称为`关系`，由`表名`、构成表的各个`列`及若干`行数据`组成。`表的结构`称为`关系模式`。

**列：**

`列（Column）`也称作`字段（Field）`或`属性`。

需要说明的是，在一个数据库中，表名必须是唯一的；在表中，字段名必须唯一，不同表中可以出现相同的字段名；表和字段的命名应尽量有意义，并尽量简单。

**行：**

表中的数据是按`行`存储的。表中的`行（Row）`也称作`元组（Tuple）`或`记录（Record）`。表中的一行即为一个元组，每行由若干字段值组成，每个字段值描述该对象的一个属性或特征。

**关键字：**

`关键字（Key）`是表中`能够唯一确定`一个元组的属性或属性组。关键字也称作`码`或`主键`。

**候选键：**

如果一个表中具有多个`能够唯一标识`一个元组的属性，则这些属性称为`候选键`。`候选键`中任选一个可作为`主键`。

**外部关键字：**

`外部关键字（Foreign Key）`也称为`外键`。如果表的一个字段不是本表的主键或候选键，而是另一个表的主键或候选键，则该字段称为`外键`。

**域：**

`域（Domain）`表示属性的取值范围。

**数据类型：**

表中每个列都有相应的数据类型，它限制（或容许）该列中存储的数据。每个字段表示同一类信息，具有相同的数据类型。


### 关系数据库基本性质

关系数据库具有下列基本性质：

- 关系必须满足最基本的要求，即：每一列都必须是不可再分的数据项。
- 表的任意两个元组不能完全相同。即使完全相同的记录，在数据库中也必须予以区别。
- 表中每一列是同一数据类型，且列的值来自相同的域。
- 不同列的值可以来自同一个域，但列名不能相同。
- 表中列的顺序可以任意交换，行的顺序也可以任意交换。


## 数据库设计基础

**数据设计的步骤：**

1、需求分析 -- 了解、分析用户需求，确定用户要实现什么功能，设计哪些数据，对数据有什么处理要求，等等。
2、概念结构设计 -- 通过对用户需求及数据的分析与综合，形成独立于具体的DBMS的概念模型。
3、逻辑结构设计 -- 将概念结构转换为某个DBMS所支持的数据模型，并进行优化。
4、物理结构设计 -- 为逻辑数据模型选取一个最适合应用环境的物理结构。关系数据库中的物理结构设计主要指设计存储结构和存取方法。
5、数据库实施 -- 建立数据库、编制与调试应用程序，组织数据入库，并进行试运行。
6、数据库运行和维护 -- 数据库应用系统经过试运行后即可投入正式运行。在数据库运行期间，需要不断对其进行维护、调整、修改、评价。DBA的维护工作有数据库的备份与恢复、数据库的安全性、完整性控制等。

**关系数据库设计的方法：**

1、概念结构的设计方法 -- 利用`E-R图`，将需求分析得到的用户需求抽象为信息结构（即概念模型）。
2、逻辑结构的设计方法 -- 将设计好的基本`E-R图`转换为`关系模型`。这种转换一般遵守以下原则：
（1）一个实体型转换为一个`关系模式（即表）`。
（2）一个`一对一（1:1）`联系可以转换为一个独立的`关系模式`，也可以与`任意一端`对应的`关系模式`合并。
（3）一个`一对多（1:N）`联系可以转换为一个独立的`关系模式`，也可以与`N端`对应的`关系模式`合并。
（4）一个`多对多（M:N）`联系转换为一个`关系模式`。与该联系相连的`各实体的码`以及`联系本身的属性`均转换为关系的属性，而`关系的码`为各实体码的组合。
（5）`三个或三个以上`实体间的一个`多元联系`可以转换为一个`关系模式`。与该多元联系相连的各实体的码以及联系本身的属性均转换为关系的属性，而关系的码为各实体码的组合。
（6）`具有相同码`的`关系模式`可以合并。


## MySQL概述

**MySQL系统特性：**

- MySQL系统使用`C和C++`编写，并使用了多种编译器进行测试，保证了源代码具有可移植性。
- 支持多种操作系统平台。
- 为多种编程语言提供了应用程序编程接口（API）。
- 支持多线程服务，可充分利用CPU资源。
- 优化的SQL查询算法，能有效地提供查询速度。
- 既能够作为一个单独的应用程序运行，也能够作为一个库而嵌入到其他的软件中。
- 提供多语言支持，常见的编码如中文的GB2312、BIG5等都可以用作数据表名和数据列名。不过，实际应用中还是要避免用中文作为数据表名或列名。
- 提供多种连接数据库的途径，如TCP/IP、ODBC和JDBC等。
- 提供用于管理、检查、优化数据库操作的管理工具。
- 可以支持拥有上千万条记录的大型数据应用，数据类型丰富。
- 支持多种存储引擎。

**MySQLL服务器的安装与配置：**

下载地址：[http://dev.mysql.com/downloads/mysql](https://dev.mysql.com/downloads/mysql/)。

这里，简要介绍在安装与配置过程中需要注意的几个问题：

1、MySQL服务器类型的选择 -- 初学者，选择MySQL服务器类型为`Developer Machine（开发者机器）`即可。
2、MySQL的存储引擎 -- 确定数据库使用情况时，选择`Multifunction Database（多功能数据库）`。这种数据库能够支持常用的`MyISM`和`InnoDB`两种存储引擎。
3、字符集设置 -- 字符集的选择影响着数据库能够正常显示中文字符。因此，要手动（Manual）设置字符集，选择`GB2312（简体中文）`，这样才能确保数据库中存储的中文字符能够正常地保存和读取，否则会出现乱码。
4、配置文件 -- `Linux`系统是`my.cnf`文件；`Windows`系统是`my.ini`文件。
5、数据文件存放位置 -- `Linux`系统是`var/lib/mysql`目录。


## MySQL编程语言 -- 结构化查询语言（SQL）

`SQL`不是某个特定数据库供应商专有的语言，所有关系数据库都支持SQL。

`SQL`简单易学，描述性强。

`SQL`尽管看上去很简单，但它实际上是一种很强有力的语言，灵活使用其语言元素，可以进行非常复杂和高级的数据库操作。

当前，尽管许多DBMS供应商通过增加语句或指令的方式，对`SQL`进行了各自的扩展，但它们仍然遵循标准SQL（即`ANSI SQL`），并以标准SQL为主体，MySQL也不例外。

### MySQL语言组成

1、`数据定义语言（DDL）` -- 数据定义语言主要用于对数据库及数据库中的各种对象进行创建、删除、修改等操作。其中，数据库对象主要有表、默认约束、规则、视图、触发器、存储过程等。

数据定义语言包括的主要SQL语句有以下三个：

- `CREATE` -- 用于创建数据库或数据库对象。
- `ALTER` -- 用于对数据库或数据库对象进行修改。
- `DROP` -- 用于删除数据库或数据库对象。

2、`数据操纵语言（DML）` -- 数据操纵语言主要用于操纵数据库中各种对象，特别是检索和修改数据。

数据操纵语言包括的主要SQL语句如下：

- `SELECT` -- 用于从表或视图中检索数据，是使用最为频繁的SQL语句之一。
- `INSERT` -- 用于将数据插入到表或视图中。
- `UPDATE` -- 用于修改表或视图中的数据，其既可修改表或视图中的一行数据，也可同时修改多行或全部数据。
- `DELETE` -- 用户从表或视图中删除数据，其中可根据条件删除指定的数据。

3、`数据控制语言（DCL）` -- 数据控制语言主要用于安全管理，例如确定哪些用户可以查看或修改数据库中的数据。

数据控制语言包括的主要SQL语句如下：

- `GRANT` -- 用于授予权限，可把语句许可或对象许可的权限授予其他用户和角色。
- `REVOKE` -- 用于收回权限，其功能与`GRANT`相反，但不影响该用户或角色从其他角色中作为成员继承的许可权限。

4、MySQL扩展增加的语言要素

（1）`常量`

常量是指在程序运行过程中值不变的量，也称为字面值或标量值。常量的使用格式取决于值的数据类型，可分为字符串常量、数值常量、十六进制常量、时间日期常量、位字段值、布尔值和NULL值。

- `字符串常量` -- 是指用单引号或双引号括起来的字符序列，分为`ASCII字符串常量`和`Unicode字符串常量`。
- `数值常量` -- 可以分为整数常量和浮点数常量。其中，整数常量是不带小数点的十进制数，浮点数常量则是使用小数点的数值常量。
- `十六进制常量` -- 一个十六进制值通常指定为一个字符串常量，每对十六进制数字被转换为一个字符，其最前面有一个大写字母`X`或小写字母`x`。
- `日期时间常量` -- 是用单引号将表示日期时间的字符串括起来而构成的。
- `位字段值` -- 可以使用`b'value'`格式符号书写位字段值。其中，`value`是一个用`0`或`1`书写的二进制值。位字段符号可以方便地指定分配给`BIT列`的值。
- `布尔值` -- 只包含两个可能的值，分别是`TRUE`和`FALSE`。其中，`FALSE`的数字值是`0`，`TRUE`的数字值是`1`.
- `NULL值` -- 通常用于表示`没有值`、`无数据`等意义，它与数字类型的`0`或字符串类型的空字符串是完全不同的。

（2）`变量`

变量用于临时存放数据，变量中的数据可以随着程序的运行而变化。变量有`名字`和`数据类型`两个属性。其中，变量的名字用于标识变量，变量的数据类型用于确定变量中存放数值的格式和可执行的运算。

在MySQL中，变量分为`用户变量`和`系统变量`。在使用时，`用户变量`前长添加一个符号`@`，用于将其与列名区分开；而大多数`系统变量`应用于其他SQL语句中时，必须在系统变量名称前添加两个`@`符号。

（3）`运算符`

MySQL提供了这样几类编程语言中常用的运算符：`算术运算符`、`位运算符`、`比较运算符`、`逻辑运算符`。

- `算术运算符`有：`+（加）`、`-（减）`、`*（乘）`、`/（除）`、`%（求模）`五种运算。
- `位运算符`有：`&（位与）`、`|（位或）`、`^（位异或）`、`~（位取反）`、`>>（位右移）`、`<<（位左移）`。
- `比较运算符`有：`=（等于）`、`>（大于）`、`<（小于）`、`>=（大于等于）`、`<=（小于等于）`、`<>（不等于）`、`!=（不等于）`、`<=>（相等或都等于空）`。
- `逻辑运算符`有：`NOT`或`!（逻辑非）`、`AND`或`&&（逻辑与）`、`OR`或`||（逻辑或）`、`XOR（逻辑异或）`。

（4）`表达式`

表达式是常量、变量、列名、复杂计算、运算符和函数的集合。一个表达式通常可以得到一个值。与常量、变量一样，表达式的值也具有某种数据类型，可能的数据类型有字符类型、数值类型、日期时间类型。因而，根据表达式的值的数据类型，表达式可分为`字符型表达式`、`数值型表达式`和`日期表达式`。

（5）`内置函数`

在编写MySQL数据库程序时，通常可直接调用系统提供的内置函数来对数据库表进行相关操作。MySQL中包含了100多个函数，大致可分为这样几类：

- `数学函数`，例如：`ABS()`、`SORT()`。
- `聚合函数`，例如：`COUNT()`。
- `字符串函数`，例如：`ASCII()`、`CHAR()`。
- `日期和时间函数`，例如：`NOW()`、`YEAR()`。
- `加密函数`，例如：`ENCODE()`、`ENCRYPT()`。
- `控制流程函数`，例如：`IF()`、`IFNULL()`。
- `格式化函数`，例如：`FORMAT()`。
- `类型转换函数`，例如：`CAST()`。
- `系统信息函数`，例如：`USER()`、`VARSION()`。

5、使用`? CONTENTS;`等`?命令`，可以查看`MySQL帮助文档`；还可以查看`MySQL官方文档`。

- [MySQL在线手册](https://dev.mysql.com/doc/)
- [MySQL发布的bug列表，或者向MySQL提交bug报告](https://bugs.mysql.com/)
- [MySQL的最新消息](https://www.mysql.com/news-and-events/newsletter/)


## 数据定义

1、数据库的创建、查看、修改、删除。
2、表的创建、查看、修改、删除；表约束的创建、查看、修改、删除。

## 数据查询

1、SELECT语句。
2、单表查询。
3、分组聚合查询。
4、连接查询。
5、子查询。
6、联合查询。

## 数据更新

1、插入数据。
2、修改数据记录。
3、删除数据记录。

## 索引

1、什么是索引？

`索引（Index）`是数据库技术中一个重要概念与技术，也是MySQL的一个数据库对象。

对数据库中数据表进行查询操作时，系统对表中的数据主要有两种搜索扫描方式：一种是`全表扫描、检索`，另一种是利用数据表上建立的`索引`进行扫描。

`全表扫描`是将表中所有数据记录从头至尾逐行读取，与查询条件进行对比，返回满足条件的记录。这种搜索方式需要读取相关表中的所有数据，需要进行大量的磁盘读写操作，当表中数据量巨大时，查询检索的效率会大大降低。

`索引访问`是通过搜索索引值，再根据索引值与记录的关系（即`指针`）直接访问数据表中的记录行。

2、为什么要用索引？

对于任何DBMS，`索引`都是查询优化的最主要方式。当数据量非常大时，如若没有合适的`索引`，数据库的查询性能会急剧下降。因此建立`索引`的目的就是加快数据库检索的速度。

3、索引分类

（1）`根据用途`，MySQL中的索引主要分为`普通索引`、`唯一性索引`、`主键索引`、`聚簇索引`及`全文索引`等几类。

- `普通索引` -- 普通索引是最基本的索引类型。普通索引的索引值可以取空值或重复值。创建普通索引时，通常使用的关键字是`INDEX`或`KEY`。
- `唯一性索引` -- 唯一性索引（`UNIQUE`）与普通索引基本相同，区别仅在于索引列值不能重复，即索引列值必须是唯一的，但可以是空值。创建唯一性索引所使用的关键字是`UNIQUE`。
- `主键索引` -- 在MySQL中建立主键时，系统自动创建主键索引（PRIMARY KEY）。`主键索引是一种唯一性索引`。与唯一性索引的不同在于索引列值不能为空。创建主键时，必须使用关键字`PRIMARY KEY`。一般是在创建表的时候指定主键，也可以通过修改表的方式添加主键。`每个表只能有一个主键`。
- `聚簇索引` -- 聚簇索引的索引顺序就是数据存储的物理存储顺序，这样能保证索引值相近的元组所存储的物理位置相近。对于非聚簇索引，索引顺序与数据的物理排列顺序无关。`一个表只能有一个聚簇索引`。并非所有的MySQL存储引擎都支持聚簇索引，目前只有`solidDB`和`InnoDB`支持。
- `全文索引` -- 全文索引只能创建在数据类型为`VARCHAR`或`TEXT`的列上。建立全文索引后，能够在建立了全文索引的列上进行全文查找。全文索引只能在`MyISAM`存储引擎的表中创建。

（2）`在实际使用中`，索引可以建立在单一列上，称为`单列索引`。也可以建立在多个列上，称为`组合索引`。

- `单列索引` -- 单列索引就是一个索引只包含原表中的一个列。`一个表上可以建立多个单列索引`。
- `组合索引` -- 组合索引也称为`复合索引`或`多列索引`。组合索引是指在表的多个列上创建一个索引。组合索引会遵循`最左前缀法则`；所谓最左前缀法则是指先按照第一列（顺序排列位于最左侧的字段）进行排序，当第一列的值相同的情况下再对第二列排序，以此类推。


## 视图

1、什么是视图？

2、为什么要用视图？


## 触发器

## 事件

## 存储过程与存储函数

## 访问控制与安全管理

## 备份与恢复

## 开发实例
